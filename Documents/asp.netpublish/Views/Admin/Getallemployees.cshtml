@model  IEnumerable<ArchentsIT.Models.RaiseTicket>
@{
    ViewBag.Title = "GetEmployeeRecords";
    Layout = "~/Views/Shared/ArchentsIT.cshtml";
}

<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    @*<link rel="stylesheet" type="text/css" href="/DataTables/datatables.css">
        <script type="text/javascript" charset="utf8" src="/DataTables/datatables.js"></script>*@
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.css">

    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.js"></script>

    <script src="https://cdn.datatables.net/v/dt/dt-1.13.2/datatables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js">
    </script>
    <script src="~/js/fancyTable.js">
    </script>
    <link href="~/StyleSheets/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="~/js/jquery.min.js"></script>
    <link href="~/StyleSheets/basic.css" rel="stylesheet" />
    <link href="~/StyleSheets/bootstrap.min.css" rel="stylesheet" />
    <script src="~/js/toaster.js"></script>
    <script src="~/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="~/js/bootstrap.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" />
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
    <link href="~/CSS/GetEmployeeRecords.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .maindiv {
            margin-left: 20px;
            margin-right: 20px;
            margin-top: 3px;
        }

            .maindiv a {
                border-radius: 15px;
            }

        table thead tr th {
            justify-content: space-between;
        }

        #addnewbtn {
            margin-bottom: -20px;
        }

        .alert-color {
            background-color: aquamarine;
            padding: 7px;
            border-radius: 10px
        }

        #StudentGender {
            margin-right: 10px;
        }

        #priarityId {
            margin-left: 10px;
        }
       
        
    </style>
    <script>
        $(document).ready(function () {

            var StatusValue = '@ViewBag.Status';
            var PriorityValue = '@ViewBag.priaority';
            if (StatusValue !='') {
                $('#SelectStatus').val(StatusValue);
            }
            else {
                $('#SelectStatus').val('');
            }
            if (PriorityValue != '') {
                $('#priarityId').val(PriorityValue);
            }
            else {
                $('#priarityId').val('');
            }

        });
    </script>
</head>
<body>
    @*<div>
            <h1>@ViewBag.message</h1>
        </div>*@
    <div>

        @if (ViewBag.successaddticket != null)
        {
            <div class="alert alert-success" style="margin-left:200px;margin-right:300px;margin-right:300px">
                <strong>Success!</strong>@ViewBag.successaddticket
                @*  <script>swal("Good job!", "You clicked the button!", "Success");</script>*@
                <button class="close" data-dismiss="alert" style="float:right;">X</button>
            </div>
        }
        @if (TempData["ItNotAvailable"] != null)
        {
            <p style="text-align:center;color:red">@TempData["ItNotAvailable"]</p>
        }
        @if (ViewBag.successfully != null)
        {
            <div class="alert alert-success" style="margin-left:200px;margin-right:300px;margin-right:300px">
                <strong>Success!</strong>@ViewBag.successfully
                @*  <script>swal("Good job!", "You clicked the button!", "Success");</script>*@
                <button class="close" data-dismiss="alert" style="float:right;">X</button>
            </div>
        }
    </div>
    <div class="maindiv">
        <form method="post" action="~/Admin/Getallemployees">
            <div style="display:flex;margin-left:200px;">
                <select class="" id="SelectStatus" name="Status">
                    <option value="">Select Status</option>
                    <option value="Open">Open</option>
                    <option value="Inprogress">Inprogress</option>
                    <option value="Completed">Completed</option>
                    <option value="Pending">Pending</option>
                    <option value="Can't do">Can't do</option>
                </select>
                <select class="" name="priarity" id="priarityId">
                    <option value="">Select Priority</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                    <option value="Critical">Critical</option>

                </select>

                <input type="submit" value="Refresh" name="" class=" btn btn-success" style="margin-left:10PX;" />
            </div>

        </form>
        @*  <a href="~/raiseTicket/AddnewTicket" class="btn btn-link" style="float:right;margin-right:65px;" id="addnewbtn">
            <i class="bi bi-plus-circle-fill" style="font-size:22px; margin-right:7px;"></i>Add Ticket
        </a>*@
    <table id="hotelsTable" class="tablesorter table hoteltable-bordered sampleTable" style="width: 100%">
        <thead>
            <tr>
                <th>
                    Sno
                </th>
                @* <th>
                    EmployeeID
                </th>*@
                <th>
                    Ticket No
                </th>
                <th>
                    Date
                </th>
                <th>
                    Status
                </th>
                <th>
                    Assigned Person
                </th>
                <th>
                    Description
                </th>
                <th>
                    Ticket No
                </th>
                <th>
                    Priority
                </th>
                <th>
                    Comment
                </th>

            </tr>
        </thead>
        @if (ViewBag.statusandpriarity != null)
        {
            foreach (var d in ViewBag.statusandpriarity)
            {
                <tr>
                    <td>@d.Sno</td>
                    @*  <td>
                        @d.EmployeeId
                    </td>*@
                    <td>
                        @d.EmpName
                    </td>
                    @*<td>@d.EmpEmail</td>*@
                    <td>@d.Date</td>
                    <td>@d.Query</td>
                    <td>@d.Assigned_Person</td>
                    <td>
                        @if (@d.Status == "Open")
                        {
                            <p style="color:red">@d.Status</p>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <p style="color:blue">@d.Status</p>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <p style="color:green">@d.Status</p>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <p style="color:black">@d.Status</p>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <p style="color:yellow">@d.Status</p>
                        }
                        else
                        {
                            <p style="color:orange">@d.Status</p>
                        }

                    </td>
                    <td>
                        @if (@d.Status == "Open")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-danger">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-primary">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-warning">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-link">@d.TicketNo</a>
                        }
                        else
                        {
                            @* <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-default">@d.TicketNo</a>  *@
                            if (@d.Status == "Open")
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-danger">@d.TicketNo</a>
                            }
                            else if (@d.Status == "Inprogress")
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-primary">@d.TicketNo</a>
                            }
                            else if (@d.Status == "Completed")
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>
                            }
                            else if (@d.Status == "Pending")
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-warning">@d.TicketNo</a>
                            }
                            else if (@d.Status == "Not Assigned")
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-link">@d.TicketNo</a>
                            }
                            else
                            {
                                <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-default">@d.TicketNo</a>
                            }
                        }

                    </td>
                    <td>@d.priarity</td>
                    <td>@d.Commant</td>

                </tr>
            }
        }
        else if (ViewBag.filter != null)
        {
            foreach (var d in ViewBag.filter)
            {
                <tr>
                    <td>@d.Sno</td>
                    @*  <td>
                        @d.EmployeeId
                    </td>*@
                    <td>
                        @d.EmpName
                    </td>
                    @*<td>@d.EmpEmail</td>*@
                    <td>@d.Date</td>
                    <td>@d.Query</td>
                    <td>@d.Assigned_Person</td>
                    <td>
                        @if (@d.Status == "Open")
                        {
                            <p style="color:red">@d.Status</p>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <p style="color:blue">@d.Status</p>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <p style="color:green">@d.Status</p>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <p style="color:black">@d.Status</p>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <p style="color:yellow">@d.Status</p>
                        }
                        else
                        {
                            <p style="color:orange">@d.Status</p>
                        }

                    </td>
                    <td>
                        @*  <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>*@
                        @if (@d.Status == "Open")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-danger">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-primary">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-warning">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-link">@d.TicketNo</a>
                        }
                        else
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-default">@d.TicketNo</a>
                        }
                    </td>
                    <td>@d.priarity</td>
                    <td>@d.Commant</td>

                </tr>
            }
        }
        else if (ViewBag.priarity != null)
        {
            foreach (var d in ViewBag.priarity)
            {
                <tr>
                    <td>@d.Sno</td>
                    @*  <td>
                        @d.EmployeeId
                    </td>*@
                    <td>
                        @d.EmpName
                    </td>
                    @*<td>@d.EmpEmail</td>*@
                    <td>@d.Date</td>
                    <td>@d.Query</td>
                    <td>@d.Assigned_Person</td>
                    <td>
                        @if (@d.Status == "Open")
                        {
                            <p style="color:red">@d.Status</p>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <p style="color:blue">@d.Status</p>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <p style="color:green">@d.Status</p>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <p style="color:black">@d.Status</p>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <p style="color:yellow">@d.Status</p>
                        }
                        else
                        {
                            <p style="color:orange">@d.Status</p>
                        }

                    </td>
                    <td>
                        @* <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>*@
                        @if (@d.Status == "Open")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-danger">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-primary">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-warning">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-link">@d.TicketNo</a>
                        }
                        else
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-default">@d.TicketNo</a>
                        }
                    </td>
                    <td>@d.priarity</td>
                    <td>@d.Commant</td>

                </tr>
            }
        }
        else if (ViewBag.result != null)
        {
            foreach (var d in ViewBag.result)
            {
                <tr>
                    <td>@d.Sno</td>
                    @*  <td>
                        @d.EmployeeId
                    </td>*@
                    <td>
                        @d.EmpName
                    </td>
                    @*<td>@d.EmpEmail</td>*@
                    <td>@d.Date</td>
                    <td>@d.Query</td>
                    <td>@d.Assigned_Person</td>
                    <td>
                        @if (@d.Status == "Open")
                        {
                            <p style="color:red">@d.Status</p>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <p style="color:blue">@d.Status</p>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <p style="color:green">@d.Status</p>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <p style="color:black">@d.Status</p>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <p style="color:yellow">@d.Status</p>
                        }
                        else
                        {
                            <p style="color:orange">@d.Status</p>
                        }

                    </td>
                    <td>
                        @* <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>*@
                        @if (@d.Status == "Open")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-danger">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Inprogress")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-primary">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Completed")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-success">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Pending")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-warning">@d.TicketNo</a>
                        }
                        else if (@d.Status == "Not Assigned")
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-link">@d.TicketNo</a>
                        }
                        else
                        {
                            <a href="/Admin/Get?id=@d.TicketNo" class="btn btn-default">@d.TicketNo</a>
                        }
                    </td>
                    <td>@d.priarity</td>
                    <td>@d.Commant</td>

                </tr>
            }
        }
    </table>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#hotelsTable').DataTable({
                "pagingType": "full_numbers",
                "dom": "lifrtip"
            });
        });
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            })
        }, 4000)
    </script>


</body>

</html>

